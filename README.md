Background:
The goal of this project is to create an sensor platform wirelessly connected to a control and logging application on an android phone. The sensors include an accelerometer, a gyroscope, a combined barometer and temperature sensor and an ambient light sensor. The data is logged to the phones internal SD card or simply shown on the screen set with GUI configuration buttons on the android phone.

Software Development:
There are 3 collections of software developed for this project. The first is the java code for the android phone residing in the android folder. This code is intended to be compiled and uploaded to the phone using the android SDK package in the Eclipse IDE. This code contains a multithreaded android application that manages the display and configuration options in one group of threads and receives and processes and logs the data received over the Bluetooth radio connection in the other set.

The second collection of code is written in C++ and is used to run the Atmega328 chip that coordinates the collection of data from the sensors and is found in the AVR folder. This code is meant to be used with the wiring libraries and can be uploaded via the Arduino IDE or a build program such as scons or make. I2C driver libraries were written for this application to communicate with each of the sensors and are also included in this folder. Additionally there is a test script written in python that allows direct collection from the senor board by hooking up an FTDI cable to the Tx and Rx lines of the radio.

The final code is written in matlab and is used to determine the calibration coefficients for the relative alignment and scaling of the accelerometer and gyroscope. There are also several functions written to perform conversions between Euler angles which the gyroscope returns and rotation matrix and quaternion representations.

Hardware Development:
The circuit schematics and PCB layout are present in the hardware folder. These files are mean to be developed with the Eagle CAD software. The board itself is constructed as an Arduino compatible shield and matches directly with the pins on an Arduino board. Each of the sensors was purchased on breakout boards from sparkfun allowing for through hole construction techniques using chemically etched boards. 

A solder jumper had to be modified on the bottom of the gyroscope boards in order to change their output from SPI to I2C. Along with the gyroscope, the accelerometer and barometer also use the I2C communication protocol. Theses chips are placed on a single BUS with 3.3 Volt logic. This logic is then converted to 5 volt logic to the AVR processor using a level shifting circuit. The power supply utilizes 4 AA alkaline batteries whose voltage begins at 5.6 volts and drops to 4 volts at 4 discharge. The linear regulator supply filters and regulates this voltage at the cost of a 1 volt drop out. The AVR processor and radio are tolerant to the voltage changes down to the point where the batteries are operating at 4 volts. 

To configure the radio it must be connected to an FTDI cable. Open a serial terminal using the FTDI port (the arduino IDE serial monitor will also work if you select the FTDI port) and disable the line ending on output and send the string '$$$' (everything inside '' is entered and return is pressed). You will see the radio enter command mode by returning 'CMD' if you have done the setup correctly and the status light will blink at a faster interval. Then re-enable line endings and send the command 'SN,DEVICE_NAME' where DEVICE_NAME is what you want the bluetooth device name to be displayed as. Use the command 'SP,XXXX' to set the security pin where XXXX is the alphanumeric pin code to be entered upon connecting to the device from a phone. Use the command 'SU,XX' to set the baud rate where the XX is the first two characters of the baud rate (ie 11 -> 115000 bits per second). If this is done the corresponding baud rate in the AVR code also needs to be changed. To verify this information has been properly set use the 'D' command to display the basic settings. 

Features: 
The slides included in this repository describe the various features of the system and show the conclusions of the experimental trials utilizing the sensor.

